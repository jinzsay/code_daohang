<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>调色板 - 在线工具导航</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="https://cdn.bytedance.com/font-awesome/6.0.0/css/all.min.css">
    <style>
        .color-picker-container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: var(--card-background);
            border-radius: 15px;
            box-shadow: 0 4px 8px var(--shadow-color);
        }

        .color-picker-main {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .color-picker-main {
                grid-template-columns: 1fr;
            }
        }

        .color-picker-section {
            padding: 20px;
            background-color: var(--background-color);
            border-radius: 10px;
        }

        .color-preview {
            width: 100%;
            height: 150px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 2px solid var(--primary-color);
        }

        .color-inputs {
            display: grid;
            gap: 10px;
        }

        .input-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .input-group label {
            min-width: 60px;
            color: var(--text-color);
        }

        .input-group input {
            flex: 1;
            padding: 8px;
            border: 1px solid var(--primary-color);
            border-radius: 5px;
            background-color: var(--background-color);
            color: var(--text-color);
        }

        .input-group input[type="range"] {
            flex: 1;
        }

        .input-group input[type="number"] {
            width: 70px;
        }

        .color-schemes {
            margin-top: 20px;
            padding: 20px;
            background-color: var(--background-color);
            border-radius: 10px;
        }

        .scheme-type {
            margin-bottom: 15px;
        }

        .scheme-type select {
            padding: 8px;
            border: 1px solid var(--primary-color);
            border-radius: 5px;
            background-color: var(--background-color);
            color: var(--text-color);
            width: 200px;
        }

        .color-palette {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .palette-color {
            aspect-ratio: 1;
            border-radius: 5px;
            cursor: pointer;
            position: relative;
            transition: transform 0.2s;
        }

        .palette-color:hover {
            transform: scale(1.05);
        }

        .palette-color .color-value {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 4px;
            font-size: 0.8em;
            text-align: center;
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .palette-color:hover .color-value {
            opacity: 1;
        }

        .copy-message {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            display: none;
            animation: fadeInOut 2s ease-in-out;
        }

        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateY(-20px); }
            20% { opacity: 1; transform: translateY(0); }
            80% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-20px); }
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            color: var(--primary-color);
            text-decoration: none;
            margin-bottom: 20px;
        }

        .back-link:hover {
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">
            <i class="fas fa-arrow-left"></i>
            返回首页
        </a>
        <header>
            <h1>调色板</h1>
            <div class="theme-toggle">
                <i class="fas fa-moon"></i>
            </div>
        </header>

        <main>
            <div class="color-picker-container">
                <div class="color-picker-main">
                    <div class="color-picker-section">
                        <h2>颜色选择器</h2>
                        <div class="color-preview" id="colorPreview"></div>
                        <div class="color-inputs">
                            <div class="input-group">
                                <label>HEX</label>
                                <input type="text" id="hexInput" placeholder="#000000">
                            </div>
                            <div class="input-group">
                                <label>RGB</label>
                                <input type="number" id="redInput" min="0" max="255" value="0">
                                <input type="number" id="greenInput" min="0" max="255" value="0">
                                <input type="number" id="blueInput" min="0" max="255" value="0">
                            </div>
                            <div class="input-group">
                                <label>HSL</label>
                                <input type="number" id="hueInput" min="0" max="360" value="0">
                                <input type="number" id="saturationInput" min="0" max="100" value="0">
                                <input type="number" id="lightnessInput" min="0" max="100" value="0">
                            </div>
                        </div>
                    </div>
                    <div class="color-picker-section">
                        <h2>颜色调节</h2>
                        <div class="color-inputs">
                            <div class="input-group">
                                <label>红色</label>
                                <input type="range" id="redRange" min="0" max="255" value="0">
                            </div>
                            <div class="input-group">
                                <label>绿色</label>
                                <input type="range" id="greenRange" min="0" max="255" value="0">
                            </div>
                            <div class="input-group">
                                <label>蓝色</label>
                                <input type="range" id="blueRange" min="0" max="255" value="0">
                            </div>
                            <div class="input-group">
                                <label>色相</label>
                                <input type="range" id="hueRange" min="0" max="360" value="0">
                            </div>
                            <div class="input-group">
                                <label>饱和度</label>
                                <input type="range" id="saturationRange" min="0" max="100" value="0">
                            </div>
                            <div class="input-group">
                                <label>亮度</label>
                                <input type="range" id="lightnessRange" min="0" max="100" value="0">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="color-schemes">
                    <h2>配色方案</h2>
                    <div class="scheme-type">
                        <select id="schemeSelect">
                            <option value="monochromatic">单色配色</option>
                            <option value="analogous">邻近配色</option>
                            <option value="complementary">互补配色</option>
                            <option value="triadic">三角配色</option>
                            <option value="tetradic">四角配色</option>
                        </select>
                    </div>
                    <div class="color-palette" id="colorPalette"></div>
                </div>
            </div>
        </main>
    </div>
    <div class="copy-message" id="copyMessage">颜色代码已复制到剪贴板！</div>
    <script src="../script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const colorPicker = {
                preview: document.getElementById('colorPreview'),
                hexInput: document.getElementById('hexInput'),
                redInput: document.getElementById('redInput'),
                greenInput: document.getElementById('greenInput'),
                blueInput: document.getElementById('blueInput'),
                hueInput: document.getElementById('hueInput'),
                saturationInput: document.getElementById('saturationInput'),
                lightnessInput: document.getElementById('lightnessInput'),
                redRange: document.getElementById('redRange'),
                greenRange: document.getElementById('greenRange'),
                blueRange: document.getElementById('blueRange'),
                hueRange: document.getElementById('hueRange'),
                saturationRange: document.getElementById('saturationRange'),
                lightnessRange: document.getElementById('lightnessRange'),
                schemeSelect: document.getElementById('schemeSelect'),
                colorPalette: document.getElementById('colorPalette'),
                copyMessage: document.getElementById('copyMessage'),

                init() {
                    this.bindEvents();
                    this.updateColor('#4a90e2');
                },

                bindEvents() {
                    // HEX输入事件
                    this.hexInput.addEventListener('input', (e) => {
                        const hex = e.target.value;
                        if (/^#[0-9A-Fa-f]{6}$/.test(hex)) {
                            this.updateColor(hex);
                        }
                    });

                    // RGB输入事件
                    [this.redInput, this.greenInput, this.blueInput].forEach(input => {
                        input.addEventListener('input', () => {
                            const rgb = {
                                r: parseInt(this.redInput.value),
                                g: parseInt(this.greenInput.value),
                                b: parseInt(this.blueInput.value)
                            };
                            this.updateColor(this.rgbToHex(rgb));
                        });
                    });

                    // HSL输入事件
                    [this.hueInput, this.saturationInput, this.lightnessInput].forEach(input => {
                        input.addEventListener('input', () => {
                            const hsl = {
                                h: parseInt(this.hueInput.value),
                                s: parseInt(this.saturationInput.value),
                                l: parseInt(this.lightnessInput.value)
                            };
                            this.updateColor(this.hslToHex(hsl));
                        });
                    });

                    // 范围滑块事件
                    this.redRange.addEventListener('input', () => {
                        this.redInput.value = this.redRange.value;
                        this.redInput.dispatchEvent(new Event('input'));
                    });

                    this.greenRange.addEventListener('input', () => {
                        this.greenInput.value = this.greenRange.value;
                        this.greenInput.dispatchEvent(new Event('input'));
                    });

                    this.blueRange.addEventListener('input', () => {
                        this.blueInput.value = this.blueRange.value;
                        this.blueInput.dispatchEvent(new Event('input'));
                    });

                    this.hueRange.addEventListener('input', () => {
                        this.hueInput.value = this.hueRange.value;
                        this.hueInput.dispatchEvent(new Event('input'));
                    });

                    this.saturationRange.addEventListener('input', () => {
                        this.saturationInput.value = this.saturationRange.value;
                        this.saturationInput.dispatchEvent(new Event('input'));
                    });

                    this.lightnessRange.addEventListener('input', () => {
                        this.lightnessInput.value = this.lightnessRange.value;
                        this.lightnessInput.dispatchEvent(new Event('input'));
                    });

                    // 配色方案选择事件
                    this.schemeSelect.addEventListener('change', () => {
                        this.updateColorScheme();
                    });
                },

                updateColor(hex) {
                    // 更新预览
                    this.preview.style.backgroundColor = hex;
                    
                    // 更新HEX输入
                    this.hexInput.value = hex;

                    // 更新RGB值
                    const rgb = this.hexToRgb(hex);
                    this.redInput.value = this.redRange.value = rgb.r;
                    this.greenInput.value = this.greenRange.value = rgb.g;
                    this.blueInput.value = this.blueRange.value = rgb.b;

                    // 更新HSL值
                    const hsl = this.rgbToHsl(rgb);
                    this.hueInput.value = this.hueRange.value = Math.round(hsl.h);
                    this.saturationInput.value = this.saturationRange.value = Math.round(hsl.s);
                    this.lightnessInput.value = this.lightnessRange.value = Math.round(hsl.l);

                    // 更新配色方案
                    this.updateColorScheme();
                },

                updateColorScheme() {
                    const baseColor = this.hexToHsl(this.hexInput.value);
                    let colors = [];

                    switch (this.schemeSelect.value) {
                        case 'monochromatic':
                            colors = this.getMonochromaticColors(baseColor);
                            break;
                        case 'analogous':
                            colors = this.getAnalogousColors(baseColor);
                            break;
                        case 'complementary':
                            colors = this.getComplementaryColors(baseColor);
                            break;
                        case 'triadic':
                            colors = this.getTriadicColors(baseColor);
                            break;
                        case 'tetradic':
                            colors = this.getTetradicColors(baseColor);
                            break;
                    }

                    this.renderColorPalette(colors);
                },

                renderColorPalette(colors) {
                    this.colorPalette.innerHTML = '';
                    colors.forEach(color => {
                        const colorDiv = document.createElement('div');
                        colorDiv.className = 'palette-color';
                        colorDiv.style.backgroundColor = color;
                        
                        const colorValue = document.createElement('div');
                        colorValue.className = 'color-value';
                        colorValue.textContent = color;
                        
                        colorDiv.appendChild(colorValue);
                        colorDiv.addEventListener('click', () => this.copyToClipboard(color));
                        
                        this.colorPalette.appendChild(colorDiv);
                    });
                },

                copyToClipboard(text) {
                    navigator.clipboard.writeText(text).then(() => {
                        this.copyMessage.style.display = 'block';
                        setTimeout(() => {
                            this.copyMessage.style.display = 'none';
                        }, 2000);
                    });
                },

                // 颜色转换工具方法
                hexToRgb(hex) {
                    const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                    return result ? {
                        r: parseInt(result[1], 16),
                        g: parseInt(result[2], 16),
                        b: parseInt(result[3], 16)
                    } : null;
                },

                rgbToHex({r, g, b}) {
                    return `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1)}`;
                },

                rgbToHsl({r, g, b}) {
                    r /= 255;
                    g /= 255;
                    b /= 255;

                    const max = Math.max(r, g, b);
                    const min = Math.min(r, g, b);
                    let h, s, l = (max + min) / 2;

                    if (max === min) {
                        h = s = 0;
                    } else {
                        const d = max - min;
                        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);

                        switch (max) {
                            case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                            case g: h = (b - r) / d + 2; break;
                            case b: h = (r - g) / d + 4; break;
                        }

                        h /= 6;
                    }

                    return {
                        h: h * 360,
                        s: s * 100,
                        l: l * 100
                    };
                },

                hslToRgb({h, s, l}) {
                    h /= 360;
                    s /= 100;
                    l /= 100;

                    let r, g, b;

                    if (s === 0) {
                        r = g = b = l;
                    } else {
                        const hue2rgb = (p, q, t) => {
                            if (t < 0) t += 1;
                            if (t > 1) t -= 1;
                            if (t < 1/6) return p + (q - p) * 6 * t;
                            if (t < 1/2) return q;
                            if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                            return p;
                        };

                        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                        const p = 2 * l - q;

                        r = hue2rgb(p, q, h + 1/3);
                        g = hue2rgb(p, q, h);
                        b = hue2rgb(p, q, h - 1/3);
                    }

                    return {
                        r: Math.round(r * 255),
                        g: Math.round(g * 255),
                        b: Math.round(b * 255)
                    };
                },

                hslToHex(hsl) {
                    const rgb = this.hslToRgb(hsl);
                    return this.rgbToHex(rgb);
                },

                hexToHsl(hex) {
                    const rgb = this.hexToRgb(hex);
                    return this.rgbToHsl(rgb);
                },

                // 配色方案生成方法
                getMonochromaticColors(baseHsl) {
                    const colors = [];
                    for (let i = 0; i < 5; i++) {
                        const l = Math.max(0, Math.min(100, baseHsl.l - 30 + i * 15));
                        colors.push(this.hslToHex({...baseHsl, l}));
                    }
                    return colors;
                },

                getAnalogousColors(baseHsl) {
                    const colors = [];
                    for (let i = -2; i <= 2; i++) {
                        const h = (baseHsl.h + i * 30 + 360) % 360;
                        colors.push(this.hslToHex({...baseHsl, h}));
                    }
                    return colors;
                },

                getComplementaryColors(baseHsl) {
                    const colors = [];
                    const complementaryH = (baseHsl.h + 180) % 360;
                    
                    colors.push(this.hslToHex(baseHsl));
                    colors.push(this.hslToHex({...baseHsl, h: complementaryH}));
                    colors.push(this.hslToHex({...baseHsl, l: baseHsl.l - 20}));
                    colors.push(this.hslToHex({...baseHsl, h: complementaryH, l: baseHsl.l - 20}));
                    colors.push(this.hslToHex({...baseHsl, s: baseHsl.s - 30}));
                    
                    return colors;
                },

                getTriadicColors(baseHsl) {
                    const colors = [];
                    for (let i = 0; i < 3; i++) {
                        const h = (baseHsl.h + i * 120) % 360;
                        colors.push(this.hslToHex({...baseHsl, h}));
                        colors.push(this.hslToHex({...baseHsl, h, l: baseHsl.l - 15}));
                    }
                    return colors.slice(0, 5);
                },

                getTetradicColors(baseHsl) {
                    const colors = [];
                    for (let i = 0; i < 4; i++) {
                        const h = (baseHsl.h + i * 90) % 360;
                        colors.push(this.hslToHex({...baseHsl, h}));
                    }
                    colors.push(this.hslToHex({...baseHsl, l: baseHsl.l - 20}));
                    return colors;
                }
            };

            colorPicker.init();
        });
    </script>
</body>
</html> 